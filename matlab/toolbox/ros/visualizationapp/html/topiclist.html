<!-- This file is for internal use only. It may be removed in the future. -->
<!-- Copyright 2022 The MathWorks, Inc. -->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-16">
<style>
    
#dataDisplay {
    white-space: nowrap;
	font-family: sans-serif;
    font-size: 10pt;
	width: 100%;
}

#dataSourceDisplay{
    white-space: nowrap;
	width: 100%;
}

.data_source_display {
    font-family: sans-serif;
    font-size: 8pt;
    text-overflow: ellipsis;
	padding: 8px;
}

.data_source_display_dark {
    font-family: sans-serif;
    font-size: 8pt;
    text-overflow: ellipsis;
	padding: 8px;
    background-color: black;
}

#topictable {
	border-collapse: collapse;
	width: 100%;
}
#topictable tr{
	border: 1px solid #c0c0c0;
	padding: 8px;
}
#topictable td{
	padding: 8px;
}
#topictable tr:nth-child(even){background-color: #f2f2f2;}
#topictable tr:hover {background-color: #ddd;}


#topictable_dark {
	border-collapse: collapse;
	width: 100%;
    background-color: black;
}
#topictable_dark tr{
	border: 2px solid #212121;
	padding: 8px;
}
#topictable_dark td{
	padding: 8px;
}
#topictable_dark tr:hover {background-color: #212121;}
    
</style>


<script type="text/javascript">    
    isDarkMode = false;
    
	function updateTopicTable(topicInfo){
        if(isDarkMode){
            topicTableId = "topictable_dark";
        }else{
            topicTableId = "topictable";
        }
        
        if(!Array.isArray(topicInfo)){
            //If not an array, make it an array
            topicInfo = [topicInfo];
        }
        
		var htmlStr = "<table id='" + topicTableId + "'>";
		for(var i = 0;i<topicInfo.length;i++){
            if(topicInfo[i].numMsgs == undefined){
                numMsgStr = "";
            }else{
                numMsgStr = "<div style='text-align:right;padding-bottom: 4px;'><i>" + topicInfo[i].numMsgs + "</i></div>";
            }

            if(topicInfo[i].frequency == undefined){
                frequencyStr = "";
            }else{
                frequencyStr = "<div style='text-align:right;'><i>" + topicInfo[i].frequency + " Hz</i></div>";
            }
			htmlStr += 
					"<tr>"+
						"<td>" +
							"<div style='text-align:left;padding-bottom: 4px;'><b>" + topicInfo[i].topic + "</b></div>" +
							"<div style='text-align:left;'><i>" + topicInfo[i].type + "</i></div>"+
						"</td>" +
						"<td>" + numMsgStr + frequencyStr + "</td>" +
					"</tr>" ;
		}
		htmlStr += "</table>";
		return htmlStr;
	}
    
    function updateSourceInfo(sourceData){
        if(isDarkMode){
            sourceClass = "data_source_display_dark";
        }else{
            sourceClass = "data_source_display";
        }
        
		var htmlStr = "<div class='" + sourceClass + "'>";
        htmlStr += sourceData.labels.sourceName + "<br><b>" + sourceData.sourceInfo.sourceName + "</b> <br><br>";
        if(sourceData.labels.startTime != undefined){
		    htmlStr += sourceData.labels.startTime + "<br> <b>" + sourceData.sourceInfo.startTime + "</b> <br><br>";
        }
        if(sourceData.labels.endTime != undefined){
            htmlStr += sourceData.labels.endTime + "<br><b>" + sourceData.sourceInfo.endTime + "</b> <br><br>";
        }
        if(sourceData.labels.duration != undefined){
            htmlStr += sourceData.labels.duration + "<br><b>" + sourceData.sourceInfo.duration + " Sec</b> <br><br>";
        }
        if(sourceData.labels.messageCount != undefined){
            htmlStr += sourceData.labels.messageCount + "<br><b>" + sourceData.sourceInfo.messageCount + "</b>";
        }
		htmlStr += "</div>";
        
		return htmlStr;
	}
    
    function changeMATLABMode(mlMode){
       if(mlMode == "dark"){
           document.body.style.backgroundColor = "#212121";
           document.body.style.color = "white";
           isDarkMode = true;
       }else{
           document.body.style.backgroundColor = "white";
           document.body.style.color = "black";
           isDarkMode = false;
       }
    }
    
    function setup(htmlComponent) {
        htmlComponent.addEventListener("DataChanged", function(event) {
            changeMATLABMode(htmlComponent.Data.mlMode);
            if(htmlComponent.Data.id == "sourceInfo"){
                htmlStr = updateSourceInfo(htmlComponent.Data);
                document.getElementById("dataDisplay").innerHTML = htmlStr;
            }if(htmlComponent.Data.id == "topicInfo"){
			    htmlStr = updateTopicTable(htmlComponent.Data.topicInfo);
                document.getElementById("dataDisplay").innerHTML = htmlStr;
            }
        });
    }
    
</script>
</head>

<body>
    <div id ="dataSourceDisplay"></div>
	<div id ="dataDisplay"></div>
</body>

</html>